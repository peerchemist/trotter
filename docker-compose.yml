version: "3.5"
services:
  mongo:
    image: mongo
    container_name: mongodb
    environment:
      - PUID=1000
      - PGID=1000
    volumes:
      - ./mongodb/database:/data/db
    ports:
      - 27017:27017
    restart: unless-stopped
  
  trotter:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: trotter
    environment:
      - MONGODB_URL="mongodb://mongo/trotternfts?readPreference=primary&appname=MongoDB%20Compass&ssl=false"
      - MNEMONIC=input engage salon smooth choose buffalo priority february advice crop visit stand
      - TROTTER_NODE_ENV=develop
    #  - ADMIN_USERNAME=""
    #  - ADMIN_PASSWORD=""
      - API_MATIC_TESTNET=https://rpc-mumbai.maticvigil.com/
      - API_MATIC_MAINNET=https://rpc-mainnet.maticvigil.com/
      - API_ETH_TESTNET=https://rinkeby.infura.io/v3/f3f30b367c6c45c093d0a7c7bd7709fa
      - API_ETH_MAINNET=https://mainnet.infura.io/v3/f3f30b367c6c45c093d0a7c7bd7709fa
      - API_BSC_TESTNET=https://data-seed-prebsc-1-s1.binance.org:8545
      - API_BSC_MAINNET=https://bsc-dataseed.binance.org
      - API_DEFAULT_NETWORK=API_MATIC_MAINNET
    ports:
      - 3000:3000
    depends_on:
      - mongo
    restart: unless-stopped
